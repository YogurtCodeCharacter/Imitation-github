{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect } from 'react';\nimport { Button, Tabs } from 'antd';\nimport { MailOutlined } from '@ant-design/icons';\nimport getCofnig from 'next/config';\nimport { connect } from 'react-redux';\nimport Router, { withRouter } from 'next/router';\nimport LRU from 'lru-cache';\nimport Repo from '../components/Repo'; // import { cacheArray } from '../lib/repo-basic-cache';\n\nconst api = require('../lib/api');\n\nconst cache = new LRU({\n  maxAge: 1000 * 3\n});\nconst {\n  publicRuntimeConfig\n} = getCofnig();\nlet cachedUserRepos, cachedUserStaredRepos;\nconst isServer = true;\n\nfunction Index({\n  userRepos,\n  userStaredRepos,\n  user,\n  router\n}) {\n  // console.log(userRepos, userStaredRepos)\n  const tabKey = router.query.key || '1';\n\n  const handleTabChange = activeKey => {\n    Router.push(`/?key=${activeKey}`);\n  };\n\n  useEffect(() => {\n    console.log('组件加载完成');\n\n    if (!isServer) {\n      cachedUserRepos = userRepos;\n      cachedUserStaredRepos = userStaredRepos;\n\n      if (userRepos) {\n        cache.set('userRepos', userRepos);\n      }\n\n      if (userStaredRepos) {\n        cache.set('userStaredRepos', userStaredRepos);\n      }\n    }\n  }, [userRepos, userStaredRepos]);\n\n  if (!user || !user.id) {\n    return __jsx(\"div\", {\n      className: \"jsx-4197889563\" + \" \" + \"root\"\n    }, __jsx(\"p\", {\n      className: \"jsx-4197889563\"\n    }, \"\\u4EB2\\uFF0C\\u60A8\\u8FD8\\u6CA1\\u6709\\u767B\\u5F55\\u54E6~\"), __jsx(Button, {\n      type: \"primary\",\n      href: publicRuntimeConfig.OAUTH_URL\n    }, \"\\u70B9\\u51FB\\u767B\\u5F55\"), __jsx(_JSXStyle, {\n      id: \"4197889563\"\n    }, \".root.jsx-4197889563{height:400px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy96b25nbGltaW5nL0Rlc2t0b3AvSW1pdGF0aW9uLWdpdGh1Yi9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFxRG9CLEFBRzBCLGFBQ0EsMEVBQ1MsOEVBQ0MsbUdBQ0osNkZBQ3JCIiwiZmlsZSI6Ii9Vc2Vycy96b25nbGltaW5nL0Rlc2t0b3AvSW1pdGF0aW9uLWdpdGh1Yi9wYWdlcy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEJ1dHRvbiwgVGFicyB9IGZyb20gJ2FudGQnO1xuaW1wb3J0IHsgTWFpbE91dGxpbmVkIH0gZnJvbSAnQGFudC1kZXNpZ24vaWNvbnMnO1xuaW1wb3J0IGdldENvZm5pZyBmcm9tICduZXh0L2NvbmZpZyc7XG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnXG5pbXBvcnQgUm91dGVyLCB7IHdpdGhSb3V0ZXIgfSBmcm9tICduZXh0L3JvdXRlcic7XG5pbXBvcnQgTFJVIGZyb20gJ2xydS1jYWNoZSc7XG5cbmltcG9ydCBSZXBvIGZyb20gJy4uL2NvbXBvbmVudHMvUmVwbyc7XG4vLyBpbXBvcnQgeyBjYWNoZUFycmF5IH0gZnJvbSAnLi4vbGliL3JlcG8tYmFzaWMtY2FjaGUnO1xuXG5jb25zdCBhcGkgPSByZXF1aXJlKCcuLi9saWIvYXBpJyk7XG5cbmNvbnN0IGNhY2hlID0gbmV3IExSVSh7XG4gIG1heEFnZTogMTAwMCAqIDMsXG59KVxuXG5jb25zdCB7IHB1YmxpY1J1bnRpbWVDb25maWcgfSA9IGdldENvZm5pZygpXG5cbmxldCBjYWNoZWRVc2VyUmVwb3MsIGNhY2hlZFVzZXJTdGFyZWRSZXBvc1xuXG5jb25zdCBpc1NlcnZlciA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnXG5cbmZ1bmN0aW9uIEluZGV4KHsgdXNlclJlcG9zLCB1c2VyU3RhcmVkUmVwb3MsIHVzZXIsIHJvdXRlciB9KSB7XG4gIC8vIGNvbnNvbGUubG9nKHVzZXJSZXBvcywgdXNlclN0YXJlZFJlcG9zKVxuXG4gIGNvbnN0IHRhYktleSA9IHJvdXRlci5xdWVyeS5rZXkgfHwgJzEnXG5cbiAgY29uc3QgaGFuZGxlVGFiQ2hhbmdlID0gYWN0aXZlS2V5ID0+IHtcbiAgICBSb3V0ZXIucHVzaChgLz9rZXk9JHthY3RpdmVLZXl9YClcbiAgfVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygn57uE5Lu25Yqg6L295a6M5oiQJyk7XG4gICAgaWYgKCFpc1NlcnZlcikge1xuICAgICAgY2FjaGVkVXNlclJlcG9zID0gdXNlclJlcG9zXG4gICAgICBjYWNoZWRVc2VyU3RhcmVkUmVwb3MgPSB1c2VyU3RhcmVkUmVwb3NcbiAgICAgIGlmICh1c2VyUmVwb3MpIHtcbiAgICAgICAgY2FjaGUuc2V0KCd1c2VyUmVwb3MnLCB1c2VyUmVwb3MpXG4gICAgICB9XG4gICAgICBpZiAodXNlclN0YXJlZFJlcG9zKSB7XG4gICAgICAgIGNhY2hlLnNldCgndXNlclN0YXJlZFJlcG9zJywgdXNlclN0YXJlZFJlcG9zKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW3VzZXJSZXBvcywgdXNlclN0YXJlZFJlcG9zXSlcblxuICBpZiAoIXVzZXIgfHwgIXVzZXIuaWQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb290XCI+XG4gICAgICAgIDxwPuS6su+8jOaCqOi/mOayoeacieeZu+W9leWTpn48L3A+XG4gICAgICAgIDxCdXR0b24gdHlwZT1cInByaW1hcnlcIiBocmVmPXtwdWJsaWNSdW50aW1lQ29uZmlnLk9BVVRIX1VSTH0+XG4gICAgICAgICAg54K55Ye755m75b2VXG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgLnJvb3Qge1xuICAgICAgICAgICAgaGVpZ2h0OiA0MDBweDtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIH1cbiAgICAgICAgYH08L3N0eWxlPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInJvb3RcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidXNlci1pbmZvXCI+XG4gICAgICAgIDxpbWcgc3JjPXt1c2VyLmF2YXRhcl91cmx9IGFsdD1cInVzZXIgYXZhdGFyXCIgY2xhc3NOYW1lPVwiYXZhdGFyXCIgLz5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibG9naW5cIj57dXNlci5sb2dpbn08L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWVcIj57dXNlci5uYW1lfTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYmlvXCI+e3VzZXIuYmlvfTwvc3Bhbj5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwiZW1haWxcIj5cbiAgICAgICAgICA8TWFpbE91dGxpbmVkIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiAxMCB9fSAvPlxuICAgICAgICAgIDxhIGhyZWY9e2BtYWlsdG86JHt1c2VyLmVtYWlsfWB9Pnt1c2VyLmVtYWlsfTwvYT5cbiAgICAgICAgPC9wPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInVzZXItcmVwb3NcIj5cbiAgICAgICAgey8qIHt1c2VyUmVwb3MubWFwKHJlcG8gPT4gKFxuICAgICAgICAgIDxSZXBvIHJlcG89e3JlcG99IC8+XG4gICAgICAgICkpfSAqL31cbiAgICAgICAgPFRhYnMgYWN0aXZlS2V5PXt0YWJLZXl9IG9uQ2hhbmdlPXtoYW5kbGVUYWJDaGFuZ2V9IGFuaW1hdGVkPXtmYWxzZX0+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZSB0YWI9XCLkvaDnmoTku5PlupNcIiBrZXk9XCIxXCI+XG4gICAgICAgICAgICB7dXNlclJlcG9zLm1hcChyZXBvID0+IChcbiAgICAgICAgICAgICAgPFJlcG8ga2V5PXtyZXBvLmlkfSByZXBvPXtyZXBvfSAvPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZSB0YWI9XCLkvaDlhbPms6jnmoTku5PlupNcIiBrZXk9XCIyXCI+XG4gICAgICAgICAgICB7dXNlclN0YXJlZFJlcG9zLm1hcChyZXBvID0+IChcbiAgICAgICAgICAgICAgPFJlcG8ga2V5PXtyZXBvLmlkfSByZXBvPXtyZXBvfSAvPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgIDwvVGFicz5cbiAgICAgIDwvZGl2PlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAucm9vdCB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgICAgICAgICBwYWRkaW5nOiAyMHB4IDA7XG4gICAgICAgIH1cbiAgICAgICAgLnVzZXItaW5mbyB7XG4gICAgICAgICAgd2lkdGg6IDIwMHB4O1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogNDBweDtcbiAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIH1cbiAgICAgICAgLmxvZ2luIHtcbiAgICAgICAgICBmb250LXdlaWdodDogODAwO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC5uYW1lIHtcbiAgICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgICAgY29sb3I6ICM3Nzc7XG4gICAgICAgIH1cbiAgICAgICAgLmJpbyB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgICAgICBjb2xvcjogIzMzMztcbiAgICAgICAgfVxuICAgICAgICAuYXZhdGFyIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnVzZXItcmVwb3Mge1xuICAgICAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvZGl2PlxuICApXG59XG5cbkluZGV4LmdldEluaXRpYWxQcm9wcyA9IGFzeW5jICh7IGN0eCwgcmVkdXhTdG9yZSB9KSA9PiB7XG5cbiAgY29uc3QgdXNlciA9IHJlZHV4U3RvcmUuZ2V0U3RhdGUoKS51c2VySW5mb1xuLy8gICBjb25zb2xlLmxvZyhyZWR1eFN0b3JlKVxuICBpZiAoIXVzZXIgfHwgIXVzZXIuaWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNMb2dpbjogZmFsc2UsXG4gICAgfVxuICB9XG5cbiAgY29uc29sZS5sb2coJ2NhY2hlJywgY2FjaGUuZ2V0KCd1c2VyUmVwb3MnKSwgY2FjaGUuZ2V0KCd1c2VyU3RhcmVkUmVwb3MnKSk7XG4gIGlmICghaXNTZXJ2ZXIpIHtcbiAgICAvL1RPRE86IOWuouaIt+err+a4suafk1xuICAgIGlmIChjYWNoZS5nZXQoJ3VzZXJSZXBvcycpICYmIGNhY2hlLmdldCgndXNlclN0YXJlZFJlcG9zJykpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXJSZXBvczogY2FjaGUuZ2V0KCd1c2VyUmVwb3MnKSxcbiAgICAgICAgdXNlclN0YXJlZFJlcG9zOiBjYWNoZS5nZXQoJ3VzZXJTdGFyZWRSZXBvcycpLFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHVzZXJSZXBvcyA9IGF3YWl0IGFwaS5yZXF1ZXN0KFxuICAgIHtcbiAgICAgIHVybDogJy91c2VyL3JlcG9zJyxcbiAgICB9LFxuICAgIGN0eC5yZXEsXG4gICAgY3R4LnJlcyxcbiAgKVxuXG4gIGNvbnN0IHVzZXJTdGFyZWRSZXBvcyA9IGF3YWl0IGFwaS5yZXF1ZXN0KFxuICAgIHtcbiAgICAgIHVybDogJy91c2VyL3N0YXJyZWQnLFxuICAgIH0sXG4gICAgY3R4LnJlcSxcbiAgICBjdHgucmVzLFxuICApXG5cbiAgcmV0dXJuIHtcbiAgICBpc0xvZ2luOiB0cnVlLFxuICAgIHVzZXJSZXBvczogdXNlclJlcG9zLmRhdGEsXG4gICAgdXNlclN0YXJlZFJlcG9zOiB1c2VyU3RhcmVkUmVwb3MuZGF0YSxcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoUm91dGVyKFxuICBjb25uZWN0KGZ1bmN0aW9uIG1hcFN0YXRlKHN0YXRlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXI6IHN0YXRlLnVzZXJJbmZvLFxuICAgIH1cbiAgfSkoSW5kZXgpLFxuKSJdfQ== */\\n/*@ sourceURL=/Users/zongliming/Desktop/Imitation-github/pages/index.js */\"));\n  }\n\n  return __jsx(\"div\", {\n    className: \"jsx-3879817409\" + \" \" + \"root\"\n  }, __jsx(\"div\", {\n    className: \"jsx-3879817409\" + \" \" + \"user-info\"\n  }, __jsx(\"img\", {\n    src: user.avatar_url,\n    alt: \"user avatar\",\n    className: \"jsx-3879817409\" + \" \" + \"avatar\"\n  }), __jsx(\"span\", {\n    className: \"jsx-3879817409\" + \" \" + \"login\"\n  }, user.login), __jsx(\"span\", {\n    className: \"jsx-3879817409\" + \" \" + \"name\"\n  }, user.name), __jsx(\"span\", {\n    className: \"jsx-3879817409\" + \" \" + \"bio\"\n  }, user.bio), __jsx(\"p\", {\n    className: \"jsx-3879817409\" + \" \" + \"email\"\n  }, __jsx(MailOutlined, {\n    style: {\n      marginRight: 10\n    }\n  }), __jsx(\"a\", {\n    href: `mailto:${user.email}`,\n    className: \"jsx-3879817409\"\n  }, user.email))), __jsx(\"div\", {\n    className: \"jsx-3879817409\" + \" \" + \"user-repos\"\n  }, __jsx(Tabs, {\n    activeKey: tabKey,\n    onChange: handleTabChange,\n    animated: false\n  }, __jsx(Tabs.TabPane, {\n    tab: \"\\u4F60\\u7684\\u4ED3\\u5E93\",\n    key: \"1\"\n  }, userRepos.map(repo => __jsx(Repo, {\n    key: repo.id,\n    repo: repo\n  }))), __jsx(Tabs.TabPane, {\n    tab: \"\\u4F60\\u5173\\u6CE8\\u7684\\u4ED3\\u5E93\",\n    key: \"2\"\n  }, userStaredRepos.map(repo => __jsx(Repo, {\n    key: repo.id,\n    repo: repo\n  }))))), __jsx(_JSXStyle, {\n    id: \"3879817409\"\n  }, \".root.jsx-3879817409{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;padding:20px 0;}.user-info.jsx-3879817409{width:200px;margin-right:40px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.login.jsx-3879817409{font-weight:800;font-size:20px;margin-top:20px;}.name.jsx-3879817409{font-size:16px;color:#777;}.bio.jsx-3879817409{margin-top:20px;color:#333;}.avatar.jsx-3879817409{width:100%;border-radius:5px;}.user-repos.jsx-3879817409{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy96b25nbGltaW5nL0Rlc2t0b3AvSW1pdGF0aW9uLWdpdGh1Yi9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUErRmtCLEFBR3dCLEFBS0QsQUFPSSxBQUtELEFBSUMsQUFJTCxBQUlDLFdBSE0sQ0FwQkEsR0FZUCxDQUxJLEFBU0osVUFIYixDQUlBLEVBSUEsQ0FwQmdCLENBT0UsZ0JBQ2xCLHdCQWVBLEdBN0J5QixZQU9WLDBFQUNTLHVCQVBQLGVBQ2pCLHdDQU9BIiwiZmlsZSI6Ii9Vc2Vycy96b25nbGltaW5nL0Rlc2t0b3AvSW1pdGF0aW9uLWdpdGh1Yi9wYWdlcy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IEJ1dHRvbiwgVGFicyB9IGZyb20gJ2FudGQnO1xuaW1wb3J0IHsgTWFpbE91dGxpbmVkIH0gZnJvbSAnQGFudC1kZXNpZ24vaWNvbnMnO1xuaW1wb3J0IGdldENvZm5pZyBmcm9tICduZXh0L2NvbmZpZyc7XG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnXG5pbXBvcnQgUm91dGVyLCB7IHdpdGhSb3V0ZXIgfSBmcm9tICduZXh0L3JvdXRlcic7XG5pbXBvcnQgTFJVIGZyb20gJ2xydS1jYWNoZSc7XG5cbmltcG9ydCBSZXBvIGZyb20gJy4uL2NvbXBvbmVudHMvUmVwbyc7XG4vLyBpbXBvcnQgeyBjYWNoZUFycmF5IH0gZnJvbSAnLi4vbGliL3JlcG8tYmFzaWMtY2FjaGUnO1xuXG5jb25zdCBhcGkgPSByZXF1aXJlKCcuLi9saWIvYXBpJyk7XG5cbmNvbnN0IGNhY2hlID0gbmV3IExSVSh7XG4gIG1heEFnZTogMTAwMCAqIDMsXG59KVxuXG5jb25zdCB7IHB1YmxpY1J1bnRpbWVDb25maWcgfSA9IGdldENvZm5pZygpXG5cbmxldCBjYWNoZWRVc2VyUmVwb3MsIGNhY2hlZFVzZXJTdGFyZWRSZXBvc1xuXG5jb25zdCBpc1NlcnZlciA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnXG5cbmZ1bmN0aW9uIEluZGV4KHsgdXNlclJlcG9zLCB1c2VyU3RhcmVkUmVwb3MsIHVzZXIsIHJvdXRlciB9KSB7XG4gIC8vIGNvbnNvbGUubG9nKHVzZXJSZXBvcywgdXNlclN0YXJlZFJlcG9zKVxuXG4gIGNvbnN0IHRhYktleSA9IHJvdXRlci5xdWVyeS5rZXkgfHwgJzEnXG5cbiAgY29uc3QgaGFuZGxlVGFiQ2hhbmdlID0gYWN0aXZlS2V5ID0+IHtcbiAgICBSb3V0ZXIucHVzaChgLz9rZXk9JHthY3RpdmVLZXl9YClcbiAgfVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygn57uE5Lu25Yqg6L295a6M5oiQJyk7XG4gICAgaWYgKCFpc1NlcnZlcikge1xuICAgICAgY2FjaGVkVXNlclJlcG9zID0gdXNlclJlcG9zXG4gICAgICBjYWNoZWRVc2VyU3RhcmVkUmVwb3MgPSB1c2VyU3RhcmVkUmVwb3NcbiAgICAgIGlmICh1c2VyUmVwb3MpIHtcbiAgICAgICAgY2FjaGUuc2V0KCd1c2VyUmVwb3MnLCB1c2VyUmVwb3MpXG4gICAgICB9XG4gICAgICBpZiAodXNlclN0YXJlZFJlcG9zKSB7XG4gICAgICAgIGNhY2hlLnNldCgndXNlclN0YXJlZFJlcG9zJywgdXNlclN0YXJlZFJlcG9zKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW3VzZXJSZXBvcywgdXNlclN0YXJlZFJlcG9zXSlcblxuICBpZiAoIXVzZXIgfHwgIXVzZXIuaWQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb290XCI+XG4gICAgICAgIDxwPuS6su+8jOaCqOi/mOayoeacieeZu+W9leWTpn48L3A+XG4gICAgICAgIDxCdXR0b24gdHlwZT1cInByaW1hcnlcIiBocmVmPXtwdWJsaWNSdW50aW1lQ29uZmlnLk9BVVRIX1VSTH0+XG4gICAgICAgICAg54K55Ye755m75b2VXG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgLnJvb3Qge1xuICAgICAgICAgICAgaGVpZ2h0OiA0MDBweDtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIH1cbiAgICAgICAgYH08L3N0eWxlPlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInJvb3RcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwidXNlci1pbmZvXCI+XG4gICAgICAgIDxpbWcgc3JjPXt1c2VyLmF2YXRhcl91cmx9IGFsdD1cInVzZXIgYXZhdGFyXCIgY2xhc3NOYW1lPVwiYXZhdGFyXCIgLz5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibG9naW5cIj57dXNlci5sb2dpbn08L3NwYW4+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm5hbWVcIj57dXNlci5uYW1lfTwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYmlvXCI+e3VzZXIuYmlvfTwvc3Bhbj5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwiZW1haWxcIj5cbiAgICAgICAgICA8TWFpbE91dGxpbmVkIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiAxMCB9fSAvPlxuICAgICAgICAgIDxhIGhyZWY9e2BtYWlsdG86JHt1c2VyLmVtYWlsfWB9Pnt1c2VyLmVtYWlsfTwvYT5cbiAgICAgICAgPC9wPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInVzZXItcmVwb3NcIj5cbiAgICAgICAgey8qIHt1c2VyUmVwb3MubWFwKHJlcG8gPT4gKFxuICAgICAgICAgIDxSZXBvIHJlcG89e3JlcG99IC8+XG4gICAgICAgICkpfSAqL31cbiAgICAgICAgPFRhYnMgYWN0aXZlS2V5PXt0YWJLZXl9IG9uQ2hhbmdlPXtoYW5kbGVUYWJDaGFuZ2V9IGFuaW1hdGVkPXtmYWxzZX0+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZSB0YWI9XCLkvaDnmoTku5PlupNcIiBrZXk9XCIxXCI+XG4gICAgICAgICAgICB7dXNlclJlcG9zLm1hcChyZXBvID0+IChcbiAgICAgICAgICAgICAgPFJlcG8ga2V5PXtyZXBvLmlkfSByZXBvPXtyZXBvfSAvPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgICAgPFRhYnMuVGFiUGFuZSB0YWI9XCLkvaDlhbPms6jnmoTku5PlupNcIiBrZXk9XCIyXCI+XG4gICAgICAgICAgICB7dXNlclN0YXJlZFJlcG9zLm1hcChyZXBvID0+IChcbiAgICAgICAgICAgICAgPFJlcG8ga2V5PXtyZXBvLmlkfSByZXBvPXtyZXBvfSAvPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9UYWJzLlRhYlBhbmU+XG4gICAgICAgIDwvVGFicz5cbiAgICAgIDwvZGl2PlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAucm9vdCB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgICAgICAgICBwYWRkaW5nOiAyMHB4IDA7XG4gICAgICAgIH1cbiAgICAgICAgLnVzZXItaW5mbyB7XG4gICAgICAgICAgd2lkdGg6IDIwMHB4O1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogNDBweDtcbiAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIH1cbiAgICAgICAgLmxvZ2luIHtcbiAgICAgICAgICBmb250LXdlaWdodDogODAwO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgICB9XG4gICAgICAgIC5uYW1lIHtcbiAgICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgICAgY29sb3I6ICM3Nzc7XG4gICAgICAgIH1cbiAgICAgICAgLmJpbyB7XG4gICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgICAgICBjb2xvcjogIzMzMztcbiAgICAgICAgfVxuICAgICAgICAuYXZhdGFyIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICAgIH1cbiAgICAgICAgLnVzZXItcmVwb3Mge1xuICAgICAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvZGl2PlxuICApXG59XG5cbkluZGV4LmdldEluaXRpYWxQcm9wcyA9IGFzeW5jICh7IGN0eCwgcmVkdXhTdG9yZSB9KSA9PiB7XG5cbiAgY29uc3QgdXNlciA9IHJlZHV4U3RvcmUuZ2V0U3RhdGUoKS51c2VySW5mb1xuLy8gICBjb25zb2xlLmxvZyhyZWR1eFN0b3JlKVxuICBpZiAoIXVzZXIgfHwgIXVzZXIuaWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaXNMb2dpbjogZmFsc2UsXG4gICAgfVxuICB9XG5cbiAgY29uc29sZS5sb2coJ2NhY2hlJywgY2FjaGUuZ2V0KCd1c2VyUmVwb3MnKSwgY2FjaGUuZ2V0KCd1c2VyU3RhcmVkUmVwb3MnKSk7XG4gIGlmICghaXNTZXJ2ZXIpIHtcbiAgICAvL1RPRE86IOWuouaIt+err+a4suafk1xuICAgIGlmIChjYWNoZS5nZXQoJ3VzZXJSZXBvcycpICYmIGNhY2hlLmdldCgndXNlclN0YXJlZFJlcG9zJykpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXJSZXBvczogY2FjaGUuZ2V0KCd1c2VyUmVwb3MnKSxcbiAgICAgICAgdXNlclN0YXJlZFJlcG9zOiBjYWNoZS5nZXQoJ3VzZXJTdGFyZWRSZXBvcycpLFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHVzZXJSZXBvcyA9IGF3YWl0IGFwaS5yZXF1ZXN0KFxuICAgIHtcbiAgICAgIHVybDogJy91c2VyL3JlcG9zJyxcbiAgICB9LFxuICAgIGN0eC5yZXEsXG4gICAgY3R4LnJlcyxcbiAgKVxuXG4gIGNvbnN0IHVzZXJTdGFyZWRSZXBvcyA9IGF3YWl0IGFwaS5yZXF1ZXN0KFxuICAgIHtcbiAgICAgIHVybDogJy91c2VyL3N0YXJyZWQnLFxuICAgIH0sXG4gICAgY3R4LnJlcSxcbiAgICBjdHgucmVzLFxuICApXG5cbiAgcmV0dXJuIHtcbiAgICBpc0xvZ2luOiB0cnVlLFxuICAgIHVzZXJSZXBvczogdXNlclJlcG9zLmRhdGEsXG4gICAgdXNlclN0YXJlZFJlcG9zOiB1c2VyU3RhcmVkUmVwb3MuZGF0YSxcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB3aXRoUm91dGVyKFxuICBjb25uZWN0KGZ1bmN0aW9uIG1hcFN0YXRlKHN0YXRlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXI6IHN0YXRlLnVzZXJJbmZvLFxuICAgIH1cbiAgfSkoSW5kZXgpLFxuKSJdfQ== */\\n/*@ sourceURL=/Users/zongliming/Desktop/Imitation-github/pages/index.js */\"));\n}\n\nIndex.getInitialProps = async ({\n  ctx,\n  reduxStore\n}) => {\n  const user = reduxStore.getState().userInfo; //   console.log(reduxStore)\n\n  if (!user || !user.id) {\n    return {\n      isLogin: false\n    };\n  }\n\n  console.log('cache', cache.get('userRepos'), cache.get('userStaredRepos'));\n\n  if (!isServer) {\n    //TODO: 客户端渲染\n    if (cache.get('userRepos') && cache.get('userStaredRepos')) {\n      return {\n        userRepos: cache.get('userRepos'),\n        userStaredRepos: cache.get('userStaredRepos')\n      };\n    }\n  }\n\n  const userRepos = await api.request({\n    url: '/user/repos'\n  }, ctx.req, ctx.res);\n  const userStaredRepos = await api.request({\n    url: '/user/starred'\n  }, ctx.req, ctx.res);\n  return {\n    isLogin: true,\n    userRepos: userRepos.data,\n    userStaredRepos: userStaredRepos.data\n  };\n};\n\nexport default withRouter(connect(function mapState(state) {\n  return {\n    user: state.userInfo\n  };\n})(Index));","map":{"version":3,"sources":["/Users/zongliming/Desktop/Imitation-github/pages/index.js"],"names":["useEffect","Button","Tabs","MailOutlined","getCofnig","connect","Router","withRouter","LRU","Repo","api","require","cache","maxAge","publicRuntimeConfig","cachedUserRepos","cachedUserStaredRepos","isServer","Index","userRepos","userStaredRepos","user","router","tabKey","query","key","handleTabChange","activeKey","push","console","log","set","id","OAUTH_URL","avatar_url","login","name","bio","marginRight","email","map","repo","getInitialProps","ctx","reduxStore","getState","userInfo","isLogin","get","request","url","req","res","data","mapState","state"],"mappings":"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","sourcesContent":["import { useEffect } from 'react';\nimport { Button, Tabs } from 'antd';\nimport { MailOutlined } from '@ant-design/icons';\nimport getCofnig from 'next/config';\nimport { connect } from 'react-redux'\nimport Router, { withRouter } from 'next/router';\nimport LRU from 'lru-cache';\n\nimport Repo from '../components/Repo';\n// import { cacheArray } from '../lib/repo-basic-cache';\n\nconst api = require('../lib/api');\n\nconst cache = new LRU({\n  maxAge: 1000 * 3,\n})\n\nconst { publicRuntimeConfig } = getCofnig()\n\nlet cachedUserRepos, cachedUserStaredRepos\n\nconst isServer = typeof window === 'undefined'\n\nfunction Index({ userRepos, userStaredRepos, user, router }) {\n  // console.log(userRepos, userStaredRepos)\n\n  const tabKey = router.query.key || '1'\n\n  const handleTabChange = activeKey => {\n    Router.push(`/?key=${activeKey}`)\n  }\n\n  useEffect(() => {\n      console.log('组件加载完成');\n    if (!isServer) {\n      cachedUserRepos = userRepos\n      cachedUserStaredRepos = userStaredRepos\n      if (userRepos) {\n        cache.set('userRepos', userRepos)\n      }\n      if (userStaredRepos) {\n        cache.set('userStaredRepos', userStaredRepos)\n      }\n    }\n  }, [userRepos, userStaredRepos])\n\n  if (!user || !user.id) {\n    return (\n      <div className=\"root\">\n        <p>亲，您还没有登录哦~</p>\n        <Button type=\"primary\" href={publicRuntimeConfig.OAUTH_URL}>\n          点击登录\n        </Button>\n        <style jsx>{`\n          .root {\n            height: 400px;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n          }\n        `}</style>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"root\">\n      <div className=\"user-info\">\n        <img src={user.avatar_url} alt=\"user avatar\" className=\"avatar\" />\n        <span className=\"login\">{user.login}</span>\n        <span className=\"name\">{user.name}</span>\n        <span className=\"bio\">{user.bio}</span>\n        <p className=\"email\">\n          <MailOutlined style={{ marginRight: 10 }} />\n          <a href={`mailto:${user.email}`}>{user.email}</a>\n        </p>\n      </div>\n      <div className=\"user-repos\">\n        {/* {userRepos.map(repo => (\n          <Repo repo={repo} />\n        ))} */}\n        <Tabs activeKey={tabKey} onChange={handleTabChange} animated={false}>\n          <Tabs.TabPane tab=\"你的仓库\" key=\"1\">\n            {userRepos.map(repo => (\n              <Repo key={repo.id} repo={repo} />\n            ))}\n          </Tabs.TabPane>\n          <Tabs.TabPane tab=\"你关注的仓库\" key=\"2\">\n            {userStaredRepos.map(repo => (\n              <Repo key={repo.id} repo={repo} />\n            ))}\n          </Tabs.TabPane>\n        </Tabs>\n      </div>\n      <style jsx>{`\n        .root {\n          display: flex;\n          align-items: flex-start;\n          padding: 20px 0;\n        }\n        .user-info {\n          width: 200px;\n          margin-right: 40px;\n          flex-shrink: 0;\n          display: flex;\n          flex-direction: column;\n        }\n        .login {\n          font-weight: 800;\n          font-size: 20px;\n          margin-top: 20px;\n        }\n        .name {\n          font-size: 16px;\n          color: #777;\n        }\n        .bio {\n          margin-top: 20px;\n          color: #333;\n        }\n        .avatar {\n          width: 100%;\n          border-radius: 5px;\n        }\n        .user-repos {\n          flex-grow: 1;\n        }\n      `}</style>\n    </div>\n  )\n}\n\nIndex.getInitialProps = async ({ ctx, reduxStore }) => {\n\n  const user = reduxStore.getState().userInfo\n//   console.log(reduxStore)\n  if (!user || !user.id) {\n    return {\n      isLogin: false,\n    }\n  }\n\n  console.log('cache', cache.get('userRepos'), cache.get('userStaredRepos'));\n  if (!isServer) {\n    //TODO: 客户端渲染\n    if (cache.get('userRepos') && cache.get('userStaredRepos')) {\n      return {\n        userRepos: cache.get('userRepos'),\n        userStaredRepos: cache.get('userStaredRepos'),\n      }\n    }\n  }\n\n  const userRepos = await api.request(\n    {\n      url: '/user/repos',\n    },\n    ctx.req,\n    ctx.res,\n  )\n\n  const userStaredRepos = await api.request(\n    {\n      url: '/user/starred',\n    },\n    ctx.req,\n    ctx.res,\n  )\n\n  return {\n    isLogin: true,\n    userRepos: userRepos.data,\n    userStaredRepos: userStaredRepos.data,\n  }\n}\n\nexport default withRouter(\n  connect(function mapState(state) {\n    return {\n      user: state.userInfo,\n    }\n  })(Index),\n)"]},"metadata":{},"sourceType":"module"}